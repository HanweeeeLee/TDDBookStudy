# 26. 빨간 막대 패턴
이 패턴들은 테스트를 언제 어디에 작성할 것인지, 테스트 작성을 언제 멈출지에 대한 것이다. 

## 한 단계 테스트
목록에서 다음 테스트를 고를 때 무엇을 기준으로 할 것인가? 새로운 무언가를 가르쳐 줄 수 있으며, 구현할 수 있다는 확신이 드는 테스트를 고를것 !
 - 더하기 
 - 빼기
 - 곱하기
 - 나누기
 - 비슷한 것 더하기
 - 동치성(equals)
 - 널과의 동치성(equlas null)
 - 널 환전
 - 한 개의 통화를 환전하기
 - 두 개의 통화를 환전하기
 - 환시세

정답은 없다.  
상향식으로 프로그램을 만들던 하향식으로 만들던 TDD의 프로세스를 효과적으로 설명해줄 수 없다.  
성장? 아는것에서 모르는것으로? 

## 시작 테스트 
어떤 테스트부터 시작하는 게 좋을까? 오퍼레이션이 아무 일도 하지 않는 경우를 먼저 테스트할 것.  
현실적인 테스트를 하나 작성하면 상당히 많은 문제를 한번에 해결해야 하는 상황이 온다. 예를들면..  
 - 이 오퍼레이션을 어디에 두어야 하나?
 - 적절한 입력 값은 무엇인가?
 - 이 입력들이 주어졌을 때 적절한 출력은 무엇인가?

테스트의 주기는 짧아야 한다.  
정말 발견하기 쉬운 입력과 출력을 사용하면 이 시간을 짧게 줄일 수 있다.  
예를들면..  
```
입력은 다각형 그물이고, 출력은 정확하게 똑같은 표면이면서 가능한 한 최소 개수의 다각형으로 구성된 다각형 그물이 된다. 
```
-> 
 - 출력이 입력과 같은 경우가 있다. 어떤 형상(configuration)의 다각형들은 이미 정규화되어 있고 더 축소할 수 없다.
 - 입력은 가능하면 적어야 한다. 이를테면 다각형 하나 또는 아예 비어있는 다각형 목록일 수도 있다.  
->
```Java
Reducer r = new Reducer(newPolygon());
assertEqauls(0, reducer.result().npoints);
```
첫 번째 테스트가 돌아간다. 이제 목록에 있는 나머지 테스트를 처리할 차례다.  
한 단계 테스트는 시작 테스트에도 적용된다. 당신에게 뭔가를 가르쳐줄 수 있으면서도 빠르게 구현할 수 있는 테스트를 선택하라.  
ex) 어떤 애플리케이션을 n번째 구현하고 있다면, 오퍼레이션을 한두 개 필요로 하는 테스트를 하나 고르자.  
ex2) 예를들면 간단한 소켓 기반 서버...
```Java
StartServer
Socket = new Socket
Message = "hello"
Socket.write(message)
assertEqauls(message, socket.read) 
```
이제 나머지 테스트는 서버만으로 이루어질 수 있다. "우리가 이런 문자열을 받았다고 치고.."

## 설명 테스트
자동화된 테스트가 더 널리 쓰이게 하려면 어떻게 해야 할까? 테스트를 통해 설명을 요청하고 테스트를 통해 설명하라.  
테스트를 이용하여 묻고, 테스트를 이용하여 설명해야한다.  
```
"당신이 설명한 걸 제가 제대로 이해했는지 한 번 얘기해보겠습니다. 예를 들어서 Foo를 이런 식으로 설정하고 Bar를 이런 식으로 설정하면 76이 나와야 한다, 이거죠?"
```
->  
```
"그러니까 어떻게 해야 하는 건지 설명하겠습니다. Foo를 이런 식으로 설정하고 Bar를 이런 식으로 설정하면 76이 나와야 된다는 겁니다. Foo가 이렇고 Bar가 이러면 답은 67이 되겠죠"
```

## 학습 테스트
외부에서 만든 소프트웨어에 대한 테스트를 작성해야 할 떄도 있을까? 패키지의 새로운 기능을 처음으로 사용해보기 전에 작성할 수 있다.  
그냥 바로 사용하는 대신 API가 우리 예상대로 실행된다는 것을 확인해줄 만한 작은 테스트를 만들어 보는 것이다. 즉 다음과 같다.  
```Java
RecordStore store;

public void setUp() {
    store = RecordStore.openRecordStore("testing", true);
}

public void tearDown() {
    RecordStore.deleteRecordStore("testing");
}

public void testStore() {
    int id = store.addRecord(new byte[] {5, 6}, 0, 2);
    assertEqauls(2, store.getRecordSize(id));
    byte[] buffer = new byte[2];
    assertEqauls(2, store.getRecord(id, buffer, 0));
    assertEqauls(5, buffer[0]);
    assertEqauls(6, buffer[1]);
}
```
만약 API를 제대로 이해했다면 이 테스트는 한번에 통과할 것이다.  

## 또 다른 테스트
어떻게 하면 주제에서 벗어나지 않고 기술적인 논의를 계속할 수 있을까? 주제와 무관한 아이디어가 떠오르면 이에 대한 테스트를 할일 목록에 적어놓고 다시 주제로 돌아올 것.  

## 회귀 테스트
시스템 장애가 보고될 때 여러분은 무슨 일을 제일 먼저 하는가? 그 장애로 인하여 실패하는 테스트, 그리고 통과할 경우엔 장애가 수정되었다고 볼 수 있는 테스트를 가장 간단하게 작성하라.  
회귀 테스트(regression test)란, 사실 완벽한 선경지명이 있다면, 처음 작성해야 하는 테스트다.  
이 테스트를 작성 할 때는 어떻게하면 처음에 이 테스트를 작성할 수 있을까를 생각해보자.  

## 휴식
지치고 고난에 빠졌을 땐 뭘 해야 하나? 그럴 땐 좀 쉬는 게 좋다.  
그러면 생각남 ㅇㅇ;  
![KakaoTalk_20220706_230903845](https://user-images.githubusercontent.com/60125719/177570495-64b069f9-6dc6-4043-b840-ac94543c1e91.jpg)
  
이 고리에서 빠져나가는 방법은 추가로 외부 요소를 도입하는 것이다. 
 - 시간 단위로는, 물병을 키보드 옆에 두어서 생리 현상으로 규칙적인 휴식을 하도록 유도하라.
 - 하루 단위로는, 더 진행하기 전에 잠이 필요한 경우 정규 근무시간 후의 약속이 진행을 일단 멈추는 데에 도움이 될 수 있다. 
 - 주 단위로는, 의식적이고 에너지 소모적인 업무 관련 생각을 떨쳐버리는 데에 주말 활동이 도움이 된다.
 - 년 단위로는, 강제 휴가 정책이 여러분의 재충전을 완벽히 도와줄 것이다. 4주 쉬래  

## 다시하기
길을 잃은 느낌이 들 땐 어떻게 할까? 코드를 다 지워버리고 처음부터 다시 해보자.  
만약 페어 프로그래밍을 한다면, 파트너를 바꿔주는 것은 생산적인 '다시 하기'를 돕는 좋은 방편이 될 것이다.  
## 싸구려 책상, 좋은 의자
TDD를 할 떄 어떤 물리적 환경이 적절한가? 나머지 시설은 싸구려를 쓸지라도 정말 좋은 의자를 구해라.  
허리가 아프면 개발을 할 수가 없다 ㅠㅠ  


  